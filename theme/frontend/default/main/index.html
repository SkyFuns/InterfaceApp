<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>车险报价</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="stylesheet" type="text/css" href="__THEMES__/css/mui.min.css"/>
    <style>



      .mui-content-padded{
        margin: 26px;
      }

      .mui-segmented-control{
        border: none;
      }

      .mui-segmented-control .mui-control-item.mui-active {
        background-color: #dd524d;

      }
      .mui-segmented-control .mui-control-item {
      color: #333;
      border-left:none
      }

      .mui-slider-group{
        height: 350px;
      }



    </style>

</head>
<body>
    <!-- 缩放式侧滑（类手机QQ） -->
    <!-- 侧滑导航根容器 -->
    <div class="mui-off-canvas-wrap mui-draggable mui-scalable">

      <!-- 主页面容器 -->
      <div class="mui-inner-wrap mui-transitioning">
        <!-- 主页面标题 -->

        <nav class="mui-bar mui-bar-tab">
            <a class="mui-tab-item" id ='1'>
              <span class="mui-icon mui-icon-home"></span>
                <span class="mui-tab-label">主页</span>
            </a>
            <a class="mui-tab-item mui-active" id ='2'>
              <span class="mui-icon mui-icon-paperplane"></span>
                <span class="mui-tab-label">车险报价</span>
            </a>
            <a class="mui-tab-item" id ='3'>
                <span class="mui-icon mui-icon-compose"></span>
                <span class="mui-tab-label">报价记录</span>
            </a>
            <a class="mui-tab-item" id ='4'>
                <span class="mui-icon mui-icon-paperclip"></span>
                <span class="mui-tab-label">知识库</span>
            </a>
            <a class="mui-tab-item" id ='5'>
                <span class="mui-icon mui-icon-contact"></span>
                <span class="mui-tab-label">个人中心</span>
            </a>
        </nav>
        <div class="mui-content mui-scroll-wrapper">
          <div class="mui-scroll">
            <!-- 主界面具体展示内容 -->
           	<!-- 顶部图片轮播 -->
            <div id="slider" class="mui-slider" >
              <div class="mui-slider-group mui-slider-loop">
                <!-- 额外增加的一个节点(循环轮播：第一个节点是最后一张轮播) -->
                <div class="mui-slider-item mui-slider-item-duplicate">
                  <a href="#">
                    <img src="__THEMES__/images/1.png">
                  </a>
                </div>
                <!-- 第一张 -->
                <div class="mui-slider-item">
                  <a href="#">
                    <img src="__THEMES__/images/1.png">
                  </a>
                </div>
                <!-- 第二张 -->
                <div class="mui-slider-item">
                  <a href="#">
                    <img src="__THEMES__/images/1.png">
                  </a>
                </div>

                <!-- 额外增加的一个节点(循环轮播：最后一个节点是第一张轮播) -->
            	<div class="mui-slider-item mui-slider-item-duplicate">
                  <a href="#">
                    <img src="__THEMES__/images/1.png">
                  </a>
                </div>
            </div>
              <div class="mui-slider-indicator">
                <div class="mui-indicator mui-active"></div>
                <div class="mui-indicator"></div>
              </div>
            </div>

            <div class="mui-segmented-control">
                <a class="mui-control-item mui-active" href="#item1" id="license_a">车牌号</a>
                <a class="mui-control-item" href="#item2" id="engine_a">发动机号，车架号</a>
            </div>

          	<div id="slider" class="mui-slider">
          	    <div class="mui-slider-group">
          	        <div id="item1" class="mui-slider-item mui-control-content mui-active">
						<div class="mui-content">
							<form id='login-form' class="mui-input-group">
								<div class="mui-input-row">
									<label>车牌号</label>
									<input id='license' type="text" class="mui-input-clear mui-input" placeholder="车牌号" value="川" style="position: fixed;">
								</div>

								<div class="mui-input-row">
									<label>投保地区</label>
									<input id='toubao' value ='四川' type="text" class="mui-input-clear mui-input" placeholder="" disabled="disabled">
								</div>
							</form>

							<div class="mui-content-padded">
								<button  id="button_license" type="button" class="mui-btn mui-btn-danger mui-btn-block" disabled="disabled">下一步</button>
							</div>
							<div class="mui-content-padded oauth-area">
							</div>
						</div>
          	 </div>
          	 <div id="item2" class="mui-slider-item mui-control-content">
          	 <div class="mui-content">
							<form id='login-form' class="mui-input-group">
								<div class="mui-input-row">
									<label>车架号</label>
									<input id='vin' type="text" class="mui-input-clear mui-input" placeholder="请输入17位车架号" style="position: fixed;">
								</div>
								<div class="mui-input-row">
									<label>投保地区</label>
									<input id='toubao' value ='四川' type="text" class="mui-input-clear mui-input" placeholder=""  disabled="disabled">
								</div>
							</form>

							<div class="mui-content-padded">
								<button type="button_vin" data-loading-icon="mui-spinner mui-spinner-custom" class="mui-btn mui-btn-danger mui-btn-block" disabled="disabled" id="button_vin">下一步</button>
							</div>
							<div class="mui-content-padded oauth-area">
							</div>
						</div>
          	</div>
          	</div>
          	</div>
          </div>
        </div>
        <div class="mui-off-canvas-backdrop"></div>
      </div>
    </div>
    <script src="__THEMES__/js/mui.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="__THEMES__/js/jquery_3.3.1.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
    mui.init()
    </script>

    <script type="text/javascript">

/*      window.addEventListener("dragend",function(){
  setTimeout(function(){
       if($(".mui-off-canvas-wrap").hasClass("mui-active")){
    }else{
      $("mui-input-row  mui-bar").removeAttr("style");
    }
   },500);
})
$('input').on('click',function(){
  $("mui-input-row  mui-bar").removeAttr("style");
});*/


      check_length('license','button_license');

      check_length('vin','button_vin');

      function check_length(id,button_id)
      {
          if(button_id == 'button_license')
          {
            document.getElementById(id).addEventListener('input',function(){
            if(this.value.length > 6 && this.value.length < 9 )
            {
              document.getElementById(button_id).disabled=false;
            }
            else
            {
              document.getElementById(button_id).disabled=true;
            }

          });
          }
          else if(button_id == 'button_vin')
          {
            document.getElementById(id).addEventListener('input',function(){
            if(this.value.length == 17)
            {
              document.getElementById(button_id).disabled=false;
            }
            else
            {
              document.getElementById(button_id).disabled=true;
            }
            button_vin.addEventListener("tap",function () {
                mui.openWindow({
                      id:'detail',
                      url:'{:url("Main/detail")}',
              });
            });
          });
          }
      }

      document.getElementById('button_license').addEventListener("tap",function () {

            $parms = new Object();
            $parms.license_no = $("#license").val();
            $parms.vin =  $("#vin").val();
              $.post('/main/renewal',{'auto':$parms},function(msg){

                if(msg.status == 0)
                {
                  mui.openWindow({
                      url:'{:url("Main/detail")}',
                  });
                }
                else
                {
                  mui.openWindow({
                      url:'{:url("Main/add_driving")}',
                  });
                }
              });

      });


      document.getElementById('item1').addEventListener("swipeleft",function(){
          document.getElementById('engine_a').className = 'mui-control-item mui-active';
          document.getElementById('license_a').className = 'mui-control-item';
      });

      document.getElementById('item2').addEventListener("swiperight",function(){
          document.getElementById('engine_a').className = 'mui-control-item';
          document.getElementById('license_a').className = 'mui-control-item mui-active';
      });



		mui(document.body).on('tap', '.mui-btn', function(e) {
		    mui(this).button('loading');
		    setTimeout(function() {
		        mui(this).button('reset');
		    }.bind(this), 2000);
		});


    mui(".mui-bar-tab").on('tap','.mui-tab-item',function(){
        var id = this.getAttribute("id");
        var url = urls(id);
        windosopen(url);
    });

    function urls(id)
    {
        //传值给详情页面，通知加载新数据
        if(id == 1)
        {
          var url = '{:url("Index/index")}';
        }
        else if(id == 2 )
        {
          var url = '{:url("Main/index")}';
        }
        else if(id == 3 )
        {
          var url = '{:url("Main/offerRecord")}';
        }
        else if(id == 4 )
        {
          var url = '#';
        }
        else if(id == 5 )
        {
          var url = '#';
        }
        else if(id == 6 )
        {
          var url = '#';
        }
        return url;
      }

      function windosopen(url)
      {
        mui.openWindow({
            url:url,
            styles:{
              top:'mui-inner-wrap mui-transitioning',//新页面顶部位置
              bottom:'mui-off-canvas-backdrop',//新页面底部位置
              width:'100%',//新页面宽度，默认为100%
              height:'100%',//新页面高度，默认为100%
            },
            extras:{},
            createNew:false,//是否重复创建同样id的webview，默认为false:不重复创建，直接显示
            show:{
              autoShow:true,//页面loaded事件发生后自动显示，默认为true
              aniShow:'slide-in-right',//页面显示动画，默认为”slide-in-right“；
              duration:'100'//页面动画持续时间，Android平台默认100毫秒，iOS平台默认200毫秒；
            },
            waiting:{
              autoShow:true,//自动显示等待框，默认为true
              title:'正在加载...',//等待对话框上显示的提示内容
              options:{}
            }
        })
      }

    </script>

</body>
</html>
